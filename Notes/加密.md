# 1、多层防御

# 2、加密（Encryption）、解密（Decryption）

为了加密信息，要将加密算法（Cipher）将明文专为密文，除非知道如何解密，否则密文看起来就是一堆乱码，这种将明文专为密文的过程叫做**加密（Encryption）**，而相反过程称为**解密（Decryption）**

# 3、凯撒加密

加密算法早在计算机出现之前就存在了，凯撒使用我们如今称为凯撒加密（Caesar Cipher）的方法来加密私人信件，他会将信件中的字母向前移动3个位置，所以a变成d，brutus变成euxwxv。为了解密，接受者要知道使用了什么算法，以及偏移的字母位数作为钥匙

# 4、替换加密

有一大类算法称为**替换加密（Substitution Cipher）**，凯撒密码就是其中一种，算法把每个字母替换成其他字母。但是有一个巨大的缺点是，字母出现的频率是一样的，比如英语中字母E出现的频率最高，如果将E替换成了X，则密文中X的出现频率就会很高，通过统计字母频率，就有可能破译密码

# 5、移位加密

另一类加密算法叫**移位加密（Permutation Cipher）**，比如**列移位加密（Columnar Transposition Cipher）**，我们这里将明文填入网格，比如选择5x5大小的网格。为了加密信息，我们换一个顺序来读取，比如从左边开始，从下往上一次读一列，就会变成图2的形式，这样加密后的字母排列是不同的，，但是字母出现的频率没有变化。这里解密的关键是要知道读取方向和网格大小

# 6、德国 Enigma 加密机

到了1900年代，人们用密码学做了加密机器，比如德国的Enigma用来加密通讯信息。

Enigma是一台类似打字机的机器，包含键盘和灯板，这两个都有完整的字母表，而且它还有一系列转子，这些是加密的关键。

首先我们看一个转子，它一面有26个接触点，代表26个字母，然后线会连接到另一面来替换字母，其实这个就是替换加密。但是Enigma更加复杂，它有更多的转子，一个转子的输出作为下一个转子的输入，并且转子还有26个起始位置，还可以按不同顺序加入转子，来提供更多字母替换映射。转子之后是一个叫反射器的特殊电路，它每个引脚会连接另一个引脚，并把信号发回转子，最后机器前方有一个插板，可以把输入键盘的字母预先进行替换来增加一层复杂度。图中显示的是输入H后，经过加密会输出L，因为线路是双向的，所以输入L也会被加密成H，所以加密和解密步骤是一样的，直接将密文输入机器就能得到对应的明文

缺点：字母加密后，一定会变成另一个字母

为了让Enigma不只是简单的替换加密，每输入一个字母，转子就会转一格，这样比如你输入`AAA`，可能会输出`BDK`，映射会随着每次按键发生改变

# 7、加密标准

## 7.1、1977年“数据加密标准”（Data Encryption Standard，DES）

随着计算机出现，加密从硬件转向了软件。早期应用最广的加密算法是IBM和NSA于1977年开发的**数据加密标准（Data Encryption Standard，DES）**，DES最初用56位二进制密钥，但到了1999年，计算机能将DES所有可能密钥都试一遍，所以DES不再安全

## 7.2、2001年“高级加密标准”（Advanced Encryption Standard，AES）

在2001年出现了**高级加密标准（Advanced Encryption Standard，AES）**，AES使用128/192/256位密钥，使得暴力破解更加困难

AES将数据切成一块一块，每块16个字节，然后用密钥进行一系列替换加密和移位加密，再加上一些其他操作，进一步加密信息，并且每块数据会重复这个过程10次以上。因为加密是需要时间的，如果使用过长的密钥或者加密次数过多，虽然更加安全，但是加密时间过长。目前AES被广泛应用，比如iPhone上加密文件，用WPA2协议在WiFi中访问HTTPS网站

# 8、密匙交换

之前讨论的加密技术，都依赖于发送方和接收方都知道密钥，发送方用密钥进行加密，而接收方使用相同密钥来解密。现在我们需要某种方法，在公开的互联网上传递密钥给对方，但是这种方法不是很安全，密钥可能会被黑客拦截。解决方案就是**密钥交换（Key Exchange）**，这是一种不发送密钥，但依然让两台计算机在密钥上达到共识的算法。我们可以使用[[单向函数]]（One-way Function）来实现，这是一种数学操作，很容易计算出结果，但是想从结果逆向推算出输入非常困难

以颜料为例，我们可以很容易地将多个颜料混合得到最终的颜色，但是想要从最终颜色推算出用了哪些颜料进行混合是非常困难的。在这个例子中，我们的密钥就是一种独特的颜色。首先有一个公开的颜色，所有人都可以看到，然后对方和我自己各自选择一个秘密颜色，为了交换密钥，我先将我的颜色和公开颜色进行混合，然后发送给对方，并且对方也将他的颜色和公开颜色混合后发送给我，当我收到对方发来的颜色后，也将自己的颜色混入，并且对方也这么操作，这样我们就都得到了由3中颜色混合的一样的最终颜色，我们就可以将这个最终颜色当做密钥

计算机中，我们可以用**Diffie-Hellman密钥交换**，在Diffie-Hellman中，单向函数是[[模幂运算]]，首先将一个数作为基数（Base），再拿另一个数作为指数（Exponent），然后将其结果出于第三个数就得到我们想要的余数，  ，这样，如果只给B、M和余数很难知道x是多少，并且如果将数字变得很长，比如几百位，想要找到秘密指数几乎是不可能的

在Diffie-Hellman中，我们有公开的数——基数B和[[模数]]M。为了安全地给对方发送信息，我们选择一个秘密指数X，然后将计算结果发送给对方，对方同样也选择一个秘密指数Y，然后也将计算结果发送给我，为了算出双方共用的密钥，我将对方的结果作为新的[[基数]]，再取X指数并求余，即  ，而对方也用相同方法进行计算，得到的也是相同结果。这样就可以将这个计算结果当做密钥，使用AES之类的加密技术进行加密通信。

Diffie-Hellman密钥交换时简历[[共享密钥]]的一种方法，双方使用一样的[[密钥加密]]和解密信息，称为**对称加密（Symmetric Encryption）**，因为加密和解密使用的密钥是一样的，前面的凯撒加密、Enigma和AES都是对称加密。

# 9、非对称加密

这里有两个不同的密钥，一个是公开的，一个是私有的，人们可以用公钥加密消息，而只有有私钥的人才能解密，所以知道公钥只能进行加密不能进行解密，而通过公钥加密后，也只能用[[私钥]]进行解密，所以它是不对称的。

比如有一个带锁的箱子，我们可以将锁和箱子给别人，他将信息放入箱子并上锁后还给我，我就可以通过自己的钥匙将其打开。

过程反过来也是可以的，可以用私钥加密再用[[公钥解密]]，这个通常用于签名。服务器可以用私钥进行加密，任何人都可以用服务器的公钥进行解密来获得信息，这使得私钥相当于一个签名，只有有私钥的人才能进行加密，只有当[[公钥]]能正确解密，才能证明数据来自正确的服务器或个人。

目前最流行的非对称加密技术是RSA。


