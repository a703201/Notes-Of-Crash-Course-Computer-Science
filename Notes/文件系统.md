# 1、文件格式

随意排列文件的数据是没有问题的，但按格式排列会更好，这个称为**文件格式（File Format）**

# 2、TXT

就像其他文件一样，文本文件只是一长串二进制数，可以通过ASCII编码将其解码成对应文本

# 3、WAV

波形文件（Wave File，WAV）用于存音频数据。在正确读取数据之前，我们需要知道一些信息比如[[码率]]，以及是单声道还是立体声，这种关于数据的数据成为元数据（Meta Data）。元数据保存在文件开头，在实际数据之前，因此也叫文件头（Header）。以下是WAV文件的前44个字节，有些部分会根据数据进行变化。而音频数据就紧跟在元数据之后，也是一长串二进制数，这些数字代表每秒捕获多次的声音幅度。麦克风首先会对声音进行每秒上千次采样，每次采样可以用一个数字表示，声压越高数字越大，称为振幅（Amplitude），这就是WAV文件中存储的数据。播放声音时，扬声器就会产生相同的波形。

# 4、BMP

位图（Bitmap）后缀为bmp，用于保存图片。计算机中，图片由多个像素（Pixel）方块组成，每个像素由红绿蓝颜色组成。类似于WAV文件，BMP文件开头也是元数据，有图片宽度、图片高度和颜色深度等等。现在假设图片宽高为4，颜色深度为24，也就是8位红色、8位绿色和9位蓝色，则每个颜色有0-255程度，然后依次保存每个位置的三原色数值

# 5、文件系统

目录文件以及对目录文件的管理，是最基本的文件系统（File System）的例子，文件系统专门负责管理文件

## 5.1、平面文件系统

最简单存储多个文件的方法是将文件**连续存储**，但是这样怎么知道文件开头和结尾在哪呢？存储器并没有文件的概念，它只是用来存储大量二进制数。所以我们需要特殊文件来记录其他文件的位置，这里称为**目录文件（Directory File）**，它通常保存在存储器最开头，方便寻找

在目录文件中，存有其它所有文件的名字，格式为`文件名+一个句号+扩展名`， 扩展名有助于得知文件类型。目录文件还保存了文件的元数据，比如创建时间、最后修改时间、文件所有者、是否能读写，最重要的是记录了文件起始位置和长度

如果要添加、删除文件或者更改文件名，必须更新整个目录文件。

因为所有文件都在同一层次。存在一个**缺点**：当我们想要对中间文件增加数据时，就会覆盖后续文件的数据。所以现代文件系统会做两个处理：
1. 将空间划分成一块块，会出现一些**预留空间（Slack Space）**，可以方便改动。同时文件数据都对齐到了相同大小，可以方便管理。使用这种方案，目录文件就要记录文件在哪些块中
2. [[拆分文件]]保存在多个块中。假设todo.txt文件中加了一些数据，使得文件太大无法存在一个块中，则文件系统会分配一个没使用的块来容纳额外的数据，则目录文件对每个文件就会记录不止一个块，而是多个块。通过分配块，文件就可以轻松增加减小。如果想要删除carrie.bmp，只要在目录文件中删除对应记录就行，让这一块空间变成可用的，这样就不需要进行擦除，只需要直接删除记录就行。在那一块被新数据覆盖之前，数据还是保存在原处的。所以恢复删除数据是有可能的

当文件过大，保存在若干个块中，这个称为**碎片（Fragmentation）**，碎片是增删改文件导致的，无法避免，但是会造成性能下降。解决方法是通过**碎片整理（Defragmentation）**，计算机会将数据来回一定，排列成正确的顺序，就能很方便地进行读写

## 5.2、分层文件系统

随着容量爆炸式增长，文件数量飞速增加，平面文件系统逐渐应付不来，所以出现了**分层文件系统（Hirerarchical File System）**，这里最大的变化就是每个文件夹中都有一个目录文件，并且目录文件不仅要指向文件，还要指向目录，还需要增加额外的元数据来区分文件和目录。这种文件系统不仅可以做出无限深的文件夹，也可以让我们很轻松地移动文件，我们不需要移动任何数据块，只需要在两个目录文件中删增记录就行。

# 6、目录文件

最简单存储多个文件的方法是将文件**连续存储**，但是这样怎么知道文件开头和结尾在哪呢？存储器并没有文件的概念，它只是用来存储大量二进制数。所以我们需要特殊文件来记录其他文件的位置，这里称为**目录文件（Directory File）**，它通常保存在存储器最开头，方便寻找

在目录文件中，存有其它所有文件的名字，格式为`文件名+一个句号+扩展名`， 扩展名有助于得知文件类型。目录文件还保存了文件的元数据，比如创建时间、最后修改时间、文件所有者、是否能读写，最重要的是记录了文件起始位置和长度