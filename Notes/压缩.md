文件能小一点，这样就能保存大量文件，同时传输也会快一些，解决方法就是**压缩（Compression）**，把数据占用的空间压得更小，为此我们需要用更少的bit来表示数据

以压缩图片为例，图片一般存成一长串像素值，每个像素的颜色是三原色的组合，每个颜色用一个字节保存，由此一张4*4大小的图像需要4*4*3=48字节

![[Pasted image 20250916100704.jpg]]

# 1、无损压缩

为了让计算机分辨哪些字节时长度，那些字节是颜色，格式需要保持一致，所以我们需要给所有像素前面都标上长度。在这个例子中现在只需要24个字节，并且不损失任何信息。这个方法称为**无损压缩（Lossless Compression）**，没有丢失任何数据

另一种无损压缩方法叫做**DFTBA（Don't Forget To Be Awesome）**，它用更紧凑的方式来表示数据块。首先我们需要一个字典，来保存代码和数据之间的对应关系。我们可以将图像看成一块一块，而不是一个个像素，我们会对些像素对生成**紧凑代码（Compact Codes）**。这些块出现频率不同，我们通过霍夫曼树的方法对每一种情况进行编码，使得频率最高的块代码最短。然后我们就能通过code代替块来对图像进行压缩。

## 1.1、游程编码

一种压缩方法是减少重复信息，最简单的方法叫**游程编码（Run-Length Encoding）**

适合经常出现相同值的文件。比如上图中有7个连续相同的黄色像素块，我们可以插入一个额外字节来表示7个连续黄色像素，然后删掉后面重复的数据。

![[Pasted image 20250916100329.png]]


## 1.2、霍夫曼树

方式：
	1. 首先，列出所有块和出现频率，每轮选两个最低的频率，可以把它们组成一个树，并重复进行，直至剩下一个树
	2. 接着，每个分支用0和1来进行标注，生成字典
	3. 然后用字典标识内容

![[{B5F5999F-CE8C-4BC8-9C61-F53428AB7E61}.png]]

![[Pasted image 20250916101357.png]]

## 1.3、字典编码

![[Pasted image 20250916101519.png]]

“消除冗余”和“使用更紧凑表示方法”通常会组合起来一起使用，几乎所有无损压缩格式都用到它们。

# 2、有损压缩

无损压缩对于文本数据十分重要，但是有其他一些数据即使丢失了一部分也不会造成很大影响，通常会丢失人们无法注意到的信息，大部分有损压缩技术（Lossy Compression）都用到了这点。

## 2.1、有损音频压缩

有损音频压缩（Lossy Audio Compressors）通过不同精度编码不同频段，这样人类听不出什么区别，也不会明显影响体验

比如电话中也用到了这个技术，这就使得在电话中的声音和现实中有所差别，用过这个技术才使得更多人同时打电话

如果网速变慢，压缩算法就会删掉更多的数据。压缩音频文件MP3和没压缩音频文件WAV或FLAC大小可以相差10倍

## 2.2、感知编码

这种删除人类无法感知的数据的方法称为**感知编码（Perceptual Coding）**。这也是各种有损压缩图像格式的基础，比如JPEG，人类的视觉系统也不是完美的，我们比较善于看到尖锐的对比，比如物体的边缘，但我们无法看出颜色的细微变化。JPEG由此将图像分解成8x8大小的像素块，然后删掉大量高频空间数据。比如以下这张图片，其中一个8x8像素，由于每个像素都有细微差异，所以无损压缩技术很难对其压缩，但是人眼很难看出这些细微差别，所以我们可以删除很多像素值，这样只占10%的原始数据，并且图像看起来没有什么区别。

![[Pasted image 20250916103400.png]]

![[Pasted image 20250916103434.png]]

![[{B0443C59-DFF7-4D5F-A0DC-1A356177FE6C}.png]]

![[{1C735E98-14D0-44B7-9164-C99AF3BFB81C}.png]]

# 7、时间冗余

视频只是一长串连续图片，所以图片的很多方面也适用于视频，但视频也可以做一些小技巧，因为帧与帧之间有很多相同的像素，称为**时间冗余（Temporal Redundancy）**。我们不需每一帧都保存这些像素，可以只保存变化了的部分。更高级的视频压缩格式会更进一步，他们找出帧和帧之间相似的补丁，然后对他们应用简单变换，比如移动、旋转、变亮和变暗，这样就不用重复保存这些相似的补丁，直接对其进行变换就行。

# 7.1、MPEG-4视频编码

[[MPEG-4]]视频是常见的标准，可以比原文件小20倍到200倍

但是当压缩太严重时，没有足够空间更新补丁内的像素，就会出现以下问题

![[{515EE11F-2B47-4FD5-BBB9-7256CC1A4EE2}.png]]